# RoboPost - پلتفرم پردازش و انتشار محتوای چندپلتفرمی

این پروژه یک پلتفرم هوشمند، مقیاس‌پذیر و رویداد-محور برای پردازش و انتشار خودکار محتوا از منابع مختلف به پلتفرم‌های اجتماعی است.

##  معماری

پروژه بر اساس معماری میکروسرویس طراحی شده است. سرویس‌ها کاملاً ایزوله هستند و تنها از طریق **RabbitMQ** با یکدیگر ارتباط برقرار می‌کنند.

- **api_gateway**: یک میکروسرویس FastAPI برای مدیریت منابع (sources)، مقاصد (destinations) و ادمین‌ها.
- **source_fetcher**: به صورت دوره‌ای فیدهای RSS را بررسی کرده و لینک‌های جدید را در صف RabbitMQ قرار می‌دهد.
- **core_engine**: لینک‌ها را از صف دریافت، محتوای کامل مقاله را استخراج و با استفاده از هوش مصنوعی آن را پردازش می‌کند. سپس مقاله را برای تأیید ادمین آماده می‌کند.
- **telegram_bot**: رابط کاربری اصلی برای ادمین‌ها. مقالات را برای تأیید ارسال کرده و پاسخ آن‌ها (تأیید/رد) را دریافت می‌کند.
- **publisher_service**: مقالات تأیید شده را در پلتفرم‌های مقصد (تلگرام، وردپرس و ...) منتشر می‌کند. این سرویس از Celery برای مدیریت وظایف زمان‌بر و تلاش مجدد (retry) استفاده می‌کند.

## 🚀 راه‌اندازی محیط توسعه

1.  **پیش‌نیازها**: Docker و Docker Compose باید نصب باشند.

2.  **ایجاد فایل‌های `.env`**:
    برای هر سرویس در پوشه‌ی `services/`, یک فایل `.env` بر اساس فایل `.env.example` مربوط به آن بسازید و مقادیر مورد نیاز (مانند توکن‌ها، رمزهای عبور و ...) را در آن قرار دهید.

3.  **اجرای پروژه**:
    برای ساخت ایمیج‌ها و اجرای تمام کانتینرها، دستور زیر را در ریشه پروژه اجرا کنید:
    ```bash
    docker-compose up --build -d
    ```

4.  **توقف پروژه**:
    ```bash
    docker-compose down
    ```

## ⚙️ پشته فناوری

- **زبان**: Python 3.9+
- **فریمورک وب**: FastAPI
- **ارتباطات**: RabbitMQ (pika)
- **پردازش پس‌زمینه**: Celery
- **پایگاه داده**: MySQL 8
- **ORM**: SQLAlchemy (Async)
- **ابزارهای پردازش محتوا**: trafilatura, google-cloud-aiplatform
- **رابط تلگرام**: python-telegram-bot v20+
- **کانتینرسازی**: Docker, Docker Compose
- **مانیتورینگ**: Prometheus, python-json-logger

## 🩺 مانیتورینگ

هر سرویس دارای دو اندپوینت استاندارد است:
- `/healthz`: وضعیت سلامت سرویس را نشان می‌دهد.
- `/metrics`: معیارهای Prometheus را برای مانیتورینگ ارائه می‌دهد.